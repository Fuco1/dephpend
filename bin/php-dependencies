#!/usr/bin/env php
<?php declare(strict_types=1);

use Mihaeu\PhpDependencies\Parser;
use Mihaeu\PhpDependencies\PhpFileFinder;
use Mihaeu\PhpDependencies\Analyser;
use PhpParser\ParserFactory;
use PhpParser\NodeTraverser;

require __DIR__.'/../vendor/autoload.php';

$parser = new Parser((new ParserFactory)->create(ParserFactory::PREFER_PHP7));
$files = (new PhpFileFinder())->find(new SplFileInfo(__DIR__ . '/../src'));
$ast = $parser->parse($files);
$dependencies = (new Analyser(new NodeTraverser()))->analyse($ast);

var_dump($dependencies);
exit(0);
